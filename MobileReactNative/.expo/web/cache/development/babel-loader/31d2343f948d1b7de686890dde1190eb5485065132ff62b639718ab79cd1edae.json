{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"bounces\", \"data\", \"itemWidth\", \"onSnapToItem\", \"pagination\", \"paginationColor\", \"paginationType\", \"renderItem\", \"autoplay\", \"autoplayDelay\", \"placeholderContent\", \"getCurrentIndex\", \"customPagination\", \"paginationPosition\", \"paginationBackgroundColor\"],\n  _excluded2 = [\"index\", \"animated\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport * as React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport NativeModules from \"react-native-web/dist/exports/NativeModules\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Pagination from \"./pagination\";\nvar AnimatedFlatList = Animated.createAnimatedComponent(FlatList);\nexport var Carousel = React.forwardRef(function (_ref, ref) {\n  var bounces = _ref.bounces,\n    data = _ref.data,\n    itemWidth = _ref.itemWidth,\n    onSnapToItem = _ref.onSnapToItem,\n    pagination = _ref.pagination,\n    paginationColor = _ref.paginationColor,\n    paginationType = _ref.paginationType,\n    _renderItem = _ref.renderItem,\n    _ref$autoplay = _ref.autoplay,\n    autoplay = _ref$autoplay === void 0 ? false : _ref$autoplay,\n    autoplayDelay = _ref.autoplayDelay,\n    placeholderContent = _ref.placeholderContent,\n    getCurrentIndex = _ref.getCurrentIndex,\n    customPagination = _ref.customPagination,\n    paginationPosition = _ref.paginationPosition,\n    paginationBackgroundColor = _ref.paginationBackgroundColor,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _React$useState = React.useState(0),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    currentIndex = _React$useState2[0],\n    setCurrentIndex = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    didReachEnd = _React$useState4[0],\n    setDidReachEnd = _React$useState4[1];\n  var slidesRef = React.useRef(null);\n  var scrollX = React.useRef(new Animated.Value(0)).current;\n  var viewabilityConfig = React.useRef({\n    viewAreaCoveragePercentThreshold: 70,\n    waitForInteraction: true\n  }).current;\n  var onEndReacted = function onEndReacted(info) {\n    var _a;\n    setDidReachEnd(true);\n    (_a = props.onEndReached) === null || _a === void 0 ? void 0 : _a.call(props, info);\n  };\n  var onViewableItemsChanged = React.useCallback(function (_ref2) {\n    var viewableItems = _ref2.viewableItems;\n    if (viewableItems && viewableItems.length > 0) {\n      var index = viewableItems[0].index;\n      setCurrentIndex(index);\n      if (index < (data === null || data === void 0 ? void 0 : data.length) - 1) {\n        setDidReachEnd(false);\n      }\n    }\n  }, [data]);\n  var viewabilityConfigCallbackPairs = React.useRef([{\n    viewabilityConfig: viewabilityConfig,\n    onViewableItemsChanged: onViewableItemsChanged\n  }]);\n  var getItemLayout = function getItemLayout(_data, index) {\n    return {\n      length: itemWidth,\n      offset: itemWidth * index,\n      index: index\n    };\n  };\n  var renderCustomPagination = function renderCustomPagination() {\n    if (customPagination && !pagination && (data === null || data === void 0 ? void 0 : data.length) > 1) {\n      return customPagination({\n        activeIndex: currentIndex\n      });\n    }\n  };\n  var scrollToIndex = function scrollToIndex(_ref3) {\n    var index = _ref3.index,\n      animated = _ref3.animated,\n      otherProps = _objectWithoutProperties(_ref3, _excluded2);\n    var _a;\n    (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.scrollToIndex(_objectSpread({\n      animated: animated,\n      index: index\n    }, otherProps));\n  };\n  React.useImperativeHandle(ref, function () {\n    return {\n      scrollToIndex: scrollToIndex\n    };\n  });\n  React.useEffect(function () {\n    onSnapToItem === null || onSnapToItem === void 0 ? void 0 : onSnapToItem(data[currentIndex]);\n    getCurrentIndex === null || getCurrentIndex === void 0 ? void 0 : getCurrentIndex(currentIndex);\n  }, [currentIndex, data, onSnapToItem, getCurrentIndex]);\n  React.useEffect(function () {\n    var timer;\n    if (autoplay) {\n      timer = setTimeout(function () {\n        var _a, _b;\n        if (didReachEnd) {\n          (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.scrollToIndex({\n            index: 0,\n            animated: true\n          });\n        } else {\n          (_b = slidesRef.current) === null || _b === void 0 ? void 0 : _b.scrollToIndex({\n            index: currentIndex + 1,\n            animated: true\n          });\n        }\n      }, autoplayDelay !== null && autoplayDelay !== void 0 ? autoplayDelay : 2500);\n    }\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [autoplay, autoplayDelay, currentIndex, didReachEnd]);\n  return React.createElement(React.Fragment, null, paginationPosition === 'top' && renderCustomPagination(), pagination && paginationPosition === 'top' && (data === null || data === void 0 ? void 0 : data.length) > 1 && React.createElement(Pagination, {\n    data: data,\n    activeIndex: scrollX,\n    paginationType: paginationType,\n    color: paginationColor,\n    paginationBackgroundColor: paginationBackgroundColor\n  }), React.createElement(AnimatedFlatList, _objectSpread(_objectSpread({}, props), {}, {\n    ref: slidesRef,\n    data: data,\n    extraData: data,\n    renderItem: function renderItem(itemProps) {\n      return React.createElement(View, {\n        style: {\n          width: itemWidth\n        },\n        key: itemProps.index\n      }, _renderItem(itemProps));\n    },\n    onScroll: Animated.event([{\n      nativeEvent: {\n        contentOffset: {\n          x: scrollX\n        }\n      }\n    }], {\n      useNativeDriver: false\n    }),\n    ListEmptyComponent: function ListEmptyComponent() {\n      return React.createElement(View, {\n        style: {\n          width: itemWidth\n        }\n      }, placeholderContent);\n    },\n    getItemLayout: getItemLayout,\n    horizontal: true,\n    pagingEnabled: true,\n    bounces: bounces,\n    showsHorizontalScrollIndicator: false,\n    snapToInterval: itemWidth,\n    snapToAlignment: 'start',\n    renderToHardwareTextureAndroid: true,\n    scrollEventThrottle: 32,\n    decelerationRate: 0,\n    style: {\n      width: itemWidth\n    },\n    viewabilityConfigCallbackPairs: viewabilityConfigCallbackPairs.current,\n    onEndReached: onEndReacted,\n    onEndReachedThreshold: 0.5,\n    keyExtractor: function keyExtractor(_, index) {\n      return index.toString();\n    },\n    initialScrollIndex: 0\n  })), pagination && paginationPosition !== 'top' && (data === null || data === void 0 ? void 0 : data.length) > 1 && React.createElement(Pagination, {\n    data: data,\n    activeIndex: scrollX,\n    paginationType: paginationType,\n    color: paginationColor,\n    paginationBackgroundColor: paginationBackgroundColor\n  }), paginationPosition !== 'top' && renderCustomPagination());\n});\nexport default NativeModules.RNBasicCarouselModule;","map":{"version":3,"names":["React","Animated","FlatList","NativeModules","View","Pagination","AnimatedFlatList","createAnimatedComponent","Carousel","forwardRef","_ref","ref","bounces","data","itemWidth","onSnapToItem","pagination","paginationColor","paginationType","renderItem","_ref$autoplay","autoplay","autoplayDelay","placeholderContent","getCurrentIndex","customPagination","paginationPosition","paginationBackgroundColor","props","_objectWithoutProperties","_excluded","_React$useState","useState","_React$useState2","_slicedToArray","currentIndex","setCurrentIndex","_React$useState3","_React$useState4","didReachEnd","setDidReachEnd","slidesRef","useRef","scrollX","Value","current","viewabilityConfig","viewAreaCoveragePercentThreshold","waitForInteraction","onEndReacted","info","_a","onEndReached","call","onViewableItemsChanged","useCallback","_ref2","viewableItems","length","index","viewabilityConfigCallbackPairs","getItemLayout","_data","offset","renderCustomPagination","activeIndex","scrollToIndex","_ref3","animated","otherProps","_excluded2","_objectSpread","useImperativeHandle","useEffect","timer","setTimeout","_b","clearTimeout","createElement","Fragment","color","extraData","itemProps","style","width","key","onScroll","event","nativeEvent","contentOffset","x","useNativeDriver","ListEmptyComponent","horizontal","pagingEnabled","showsHorizontalScrollIndicator","snapToInterval","snapToAlignment","renderToHardwareTextureAndroid","scrollEventThrottle","decelerationRate","onEndReachedThreshold","keyExtractor","_","toString","initialScrollIndex","RNBasicCarouselModule"],"sources":["../src/index.tsx"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}